(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{163:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h}));var o=n(0),a=n.n(o);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},s=Object.keys(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),u=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,c=e.parentName,l=r(e,["components","mdxType","originalType","parentName"]),p=u(n),d=o,h=p["".concat(c,".").concat(d)]||p[d]||b[d]||s;return n?a.a.createElement(h,i(i({ref:t},l),{},{components:n})):a.a.createElement(h,i({ref:t},l))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,c=new Array(s);c[0]=d;var i={};for(var r in t)hasOwnProperty.call(t,r)&&(i[r]=t[r]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var l=2;l<s;l++)c[l]=n[l];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},97:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return r})),n.d(t,"default",(function(){return u}));var o=n(3),a=n(7),s=(n(0),n(163)),c={id:"connectToSubsocial",title:"Connect To Subsocial",displayed_sidebar:"developSidebar"},i={unversionedId:"develop/how-to-guides/connectToSubsocial",id:"develop/how-to-guides/connectToSubsocial",isDocsHomePage:!1,title:"Connect To Subsocial",description:"This section covers how to connect to the Subsocial blockchain using our JS SDK.",source:"@site/docs/develop/how-to-guides/ConnectToSubsocial.md",slug:"/develop/how-to-guides/connectToSubsocial",permalink:"/docs/develop/how-to-guides/connectToSubsocial",editUrl:"https://github.com/dappforce/dappforce.github.io/docs/develop/how-to-guides/ConnectToSubsocial.md",version:"current",sidebar:"developSidebar",previous:{title:"Understanding The Testnet",permalink:"/docs/develop/getting-started/testnet"},next:{title:"Signing & Sending Transactions",permalink:"/docs/develop/how-to-guides/transactions"}},r=[{value:"Installing The SubSocial SDK",id:"installing-the-subsocial-sdk",children:[]},{value:"Initializing The APIs",id:"initializing-the-apis",children:[]},{value:"Fetching data from Subsocial",id:"fetching-data-from-subsocial",children:[]}],l={toc:r};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(s.b)("wrapper",Object(o.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"This section covers how to connect to the Subsocial blockchain using our JS SDK.")),Object(s.b)("p",null,"Once you have the knowledge and understanding about how decentralized social networks work, it's time to get started building your own Social Dapp. This guide will show you how you can do it in just a few easy steps."),Object(s.b)("h3",{id:"installing-the-subsocial-sdk"},"Installing The SubSocial SDK"),Object(s.b)("p",null,"To start building and connecting to the Subsocial chain, you need to install the typescript-based SDK first."),Object(s.b)("p",null,"Run:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"yarn add @subsocial/api\n")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"To get more details follow ",Object(s.b)("a",{parentName:"p",href:"/docs/develop/getting-started/installation"},"installing @subsocial/api guide"))),Object(s.b)("h3",{id:"initializing-the-apis"},"Initializing The APIs"),Object(s.b)("p",null,"You need to initialize the Subsocial SDK with the following syntax:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},"\n/* import newFlatSubsocialApi and util functions */\nimport { newFlatSubsocialApi } from '@subsocial/api'\nimport { bnsToIds, idToBn } from '@subsocial/utils'\n\n/* \n  Store the URLs of the Substrate and IPFS nodes \n  Note: You can either run local substrateNode or use our testnet.\n*/\nconst substrateNodeUrl = 'http://127.0.0.1:9944'\nconst offchainUrl = 'http://127.0.0.1:3001'\nconst ipfsNodeUrl = 'http://127.0.0.1:8080'\n\n/* Creating flatSubsocialApi object */\nconst flatApi = await newFlatSubsocialApi({\n    substrateNodeUrl,\n    offchainUrl, \n    ipfsNodeUrl \n  })\n\n")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},Object(s.b)("strong",{parentName:"p"},"NOTE"),": You can either run a local ",Object(s.b)("a",{parentName:"p",href:"https://github.com/dappforce/subsocial-node"},"Subsocial node")," or use our testnet for running the API calls.")),Object(s.b)("h3",{id:"fetching-data-from-subsocial"},"Fetching data from Subsocial"),Object(s.b)("p",null,"Now let's see how you can fetch data from Subsocial nodes and use it in your cool Social Dapps."),Object(s.b)("h4",{id:"getting-spaces--posts-by-id"},"Getting spaces & posts by ID"),Object(s.b)("p",null,"Spaces are one of the most important parts of Subsocial. They function as a home for all posts related to a certain topic. Each space can have multiple posts in them and every space holds its own unique id.  "),Object(s.b)("p",null,"For example: The space for Subsocial's announcements has the id 1."),Object(s.b)("p",null,"Now let's try to fetch data from this space:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},"  // Subsocial's space id.\n  const spaceId = 1 \n\n  // Find space by id.\n  const space = await flatApi.findSpace({id: spaceId})\n  console.log(space)\n")),Object(s.b)("p",null,"In your console you will see:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"{\n  id: 1\n  created: {\n    account: 3osmnRNnrcScHsgkTJH1xyBF5kGjpbWHsGrqM31BJpy4vwn8\n    block: 0\n    time: 0\n  }\n  updated: {\n    account: 3osmnRNnrcScHsgkTJH1xyBF5kGjpbWHsGrqM31BJpy4vwn8\n    block: 1,976,464\n    time: 1,608,780,324,000\n  }\n  owner: 3osmnRNnrcScHsgkTJH1xyBF5kGjpbWHsGrqM31BJpy4vwn8\n  parentId: null\n  handle: subsocial\n  content: {\n    IPFS: bafyreib3mgbou4xln42qqcgj6qlt3cif35x4ribisxgq7unhpun525l54e\n  }\n  hidden: false\n  postsCount: 100\n  hiddenPostsCount: 7\n  followersCount: 2,319\n  score: 65,716\n  permissions: null\n}\n")),Object(s.b)("p",null,"You can see that in response to the findSpace method, you are getting all the details about a particular space. To see the content of a space you should use the IPFS cid from the data."),Object(s.b)("p",null,"Now let's try to fetch some posts and reactions from this space."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},"\n  // Fetching all postIds of a particular spaceId.\n  const postBns = await flatApi.subsocial.substrate.postIdsBySpaceId(idToBn(spaceId))\n  const postIds = bnsToIds(postBns).reverse();\n\n")),Object(s.b)("p",null,"The above code fetches all the postIds of the space. Now, we can use these Ids to get post data, reactions and much more."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},"  // Fetching the first post from the list of postIds.\n  // Use substrateApi to run Subsocial's pallet functions to get data about posts and content on the chain.\n  const substrateApi = await flatApi.subsocial.substrate.api\n\n  // Gets all reactions (upvotes/downvotes) by you on all post ids [we are using multi request from blockchain]\n  const tuples = postIds.map(postId => [ myAccount, postId ])\n  const reactionIds = await substrateApi.query.reactions.postReactionIdByAccount.multi(tuples)\n  const reactions = await res.subsocial.substrate.findReactions(reactionIds as ReactionId[])\n\n")),Object(s.b)("p",null,"Lets understand the example. First we connected to Subsocial using the newFlatSubsocialApi function that\nneeds the Substrate node URL, offchain URL, and IPFS node URL. After initialization, flatApi can be\nused to retrieve data from the node. Then we fetched a space and post IDs by the space ID. After that we\nconnected to the Substrate API to get reaction IDs. In the next step, we got the ID of a space's owner by\nretrieving the ID from the space struct. And finally we fetched owner posts by owner space IDs. "),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"You can learn more about these terms below and in ",Object(s.b)("a",{parentName:"p",href:"/docs/basics/glossary/overview"},"Glossary"))))}u.isMDXComponent=!0}}]);